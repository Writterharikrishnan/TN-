<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TN EB Bill Calculator 2025 | Accurate Telescopic Tariff</title>
<meta name="description" content="Calculate your Tamil Nadu electricity bill accurately with 2025-26 tariff rates. Includes telescopic slab calculations for high consumption (>500 units).">
<meta name="keywords" content="TN EB calculator 2025, TNEB bill calculator, Tamil Nadu electricity bill, TNEB high usage rates, telescopic tariff calculator">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
  --primary: #2563eb;
  --bg-grad: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  --surface: #ffffff;
  --text-main: #1e293b;
  --radius: 16px;
  --danger: #dc2626;
}

body {
  margin: 0; padding: 0; font-family: 'Inter', sans-serif;
  background: var(--bg-grad); color: var(--text-main);
  min-height: 100vh; display: flex; align-items: center; justify-content: center;
}

.container {
  max-width: 1000px; width: 90%; margin: 40px auto;
  background: var(--surface); padding: 40px; border-radius: var(--radius);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; gap: 50px; flex-wrap: wrap;
}

.calculator, .table-container { flex: 1 1 400px; position: relative; z-index: 2; }

h1 { font-size: 1.8rem; font-weight: 800; margin-bottom: 10px; }
.seo-text { font-size: 0.9rem; color: #64748b; margin-bottom: 25px; line-height: 1.5; }

/* Inputs */
.input-group { margin-bottom: 20px; }
label { font-size: 0.9rem; font-weight: 600; display: block; margin-bottom: 8px; }
.input-wrapper { position: relative; }
.input-wrapper i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #94a3b8; }
input, select {
  width: 100%; padding: 14px 14px 14px 45px; border-radius: 12px;
  border: 2px solid #e2e8f0; font-size: 1rem; outline: none; box-sizing: border-box; transition: 0.3s;
}
input:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37,99,235,0.1); }

/* Button */
button {
  width: 100%; padding: 16px; border-radius: 12px; border: none;
  background: var(--primary); color: #fff; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: 0.2s; text-transform: uppercase;
}
button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(37,99,235,0.3); }

/* Results */
.result { display: none; margin-top: 30px; background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #e2e8f0; }
.bill-total { font-size: 1.8rem; color: var(--primary); font-weight: 800; text-align: center; display: block; margin-bottom: 15px; }
.high-usage-badge { 
    background: #fee2e2; color: #991b1b; padding: 8px 12px; 
    border-radius: 8px; font-size: 0.85rem; font-weight: 600; 
    text-align: center; margin-bottom: 20px; display: block; border: 1px solid #fecaca;
}

/* Tables */
table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem; }
th, td { padding: 10px; text-align: left; border-bottom: 1px solid #e2e8f0; }
th { background: #f8fafc; font-weight: 600; color: #475569; }

/* Responsive */
@media(max-width: 920px){ .container { flex-direction: column; padding: 20px; } }
</style>
</head>
<body>

<div class="container">
  
  <div class="calculator">
    <h1>TN EB Bill Calculator</h1>
    <p class="seo-text">Accurate 2025-26 TNEB estimator. This tool correctly handles the "Telescopic" pricing where crossing 500 units changes your tariff structure, including the latest high-consumption slabs.</p>
    
    <div class="input-group">
      <label>Units Consumed</label>
      <div class="input-wrapper">
        <i class="fa-solid fa-bolt"></i>
        <input id="units" type="number" placeholder="e.g. 550" min="0" />
      </div>
    </div>

    <div class="input-group">
      <label>Billing Cycle</label>
      <div class="input-wrapper">
        <i class="fa-regular fa-calendar-days"></i>
        <select id="cycle">
          <option value="bimonthly">Bi-Monthly (Standard)</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>
    </div>

    <div class="input-group">
      <label>Connection Type</label>
      <div class="input-wrapper">
        <i class="fa-solid fa-house-chimney"></i>
        <select id="type">
          <option value="domestic">Domestic</option>
          <option value="commercial">Commercial</option>
        </select>
      </div>
    </div>

    <button onclick="calc()">Calculate Bill</button>

    <div id="result" class="result"></div>
  </div>

  <div class="table-container">
    <h2 style="color:var(--primary); font-weight:700; margin-bottom:15px;">2025-26 Tariff Rates</h2>
    
    <div style="margin-bottom:20px;">
        <h3 style="font-size:0.95rem; color:#166534;">Low Usage (Total ≤ 500)</h3>
        <table>
            <tr><td>0 - 100</td><td>Free</td></tr>
            <tr><td>101 - 200</td><td>₹2.35</td></tr>
            <tr><td>201 - 400</td><td>₹4.70</td></tr>
            <tr><td>401 - 500</td><td>₹6.30</td></tr>
        </table>
    </div>

    <div>
        <h3 style="font-size:0.95rem; color:#dc2626;">High Usage (Total > 500)</h3>
        <table>
            <tr><td>0 - 100</td><td>Free</td></tr>
            <tr><td>101 - 400</td><td>₹4.70 <small>(Subsidy Removed)</small></td></tr>
            <tr><td>401 - 500</td><td>₹6.30</td></tr>
            <tr><td>501 - 600</td><td>₹8.40</td></tr>
            <tr><td>601 - 800</td><td>₹9.45</td></tr>
            <tr><td>801 - 1000</td><td>₹10.50</td></tr>
            <tr><td>> 1000</td><td>₹11.55</td></tr>
        </table>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
function getBillBreakdown(units) {
    let cost = 0;
    let breakdown = [];
    let fixed = 0;
    let isHigh = false;

    // --- LOGIC A: Units <= 500 (Subsidy Active) ---
    if (units <= 500) {
        // 0-100: Free
        breakdown.push({r: "0-100", u: Math.min(units, 100), price: 0, sum: 0});
        
        if(units > 100) {
            let s2 = Math.min(units - 100, 100);
            cost += s2 * 2.35;
            breakdown.push({r: "101-200", u: s2, price: 2.35, sum: s2 * 2.35});
        }
        if(units > 200) {
            let s3 = Math.min(units - 200, 200);
            cost += s3 * 4.70;
            breakdown.push({r: "201-400", u: s3, price: 4.70, sum: s3 * 4.70});
        }
        if(units > 400) {
            let s4 = units - 400;
            cost += s4 * 6.30;
            breakdown.push({r: "401-500", u: s4, price: 6.30, sum: s4 * 6.30});
        }
        fixed = 30; // Standard fixed charge for lower consumption
    } 
    
    // --- LOGIC B: Units > 500 (Telescopic / High Usage) ---
    else {
        isHigh = true;
        let rem = units;

        // 0-100: Free
        breakdown.push({r: "0-100", u: 100, price: 0, sum: 0});
        rem -= 100;

        // 101-400: Charged at 4.70 (The 2.35 slab is GONE)
        // 400 - 100 = 300 units available in this slab
        let s2 = Math.min(rem, 300);
        cost += s2 * 4.70;
        breakdown.push({r: "101-400", u: s2, price: 4.70, sum: s2 * 4.70});
        rem -= s2;

        // 401-500: Charged at 6.30
        if(rem > 0) {
            let s3 = Math.min(rem, 100);
            cost += s3 * 6.30;
            breakdown.push({r: "401-500", u: s3, price: 6.30, sum: s3 * 6.30});
            rem -= s3;
        }

        // 501-600: Charged at 8.40
        if(rem > 0) {
            let s4 = Math.min(rem, 100);
            cost += s4 * 8.40;
            breakdown.push({r: "501-600", u: s4, price: 8.40, sum: s4 * 8.40});
            rem -= s4;
        }

        // 601-800: Charged at 9.45
        if(rem > 0) {
            let s5 = Math.min(rem, 200);
            cost += s5 * 9.45;
            breakdown.push({r: "601-800", u: s5, price: 9.45, sum: s5 * 9.45});
            rem -= s5;
        }

        // 801-1000: Charged at 10.50
        if(rem > 0) {
            let s6 = Math.min(rem, 200);
            cost += s6 * 10.50;
            breakdown.push({r: "801-1000", u: s6, price: 10.50, sum: s6 * 10.50});
            rem -= s6;
        }

        // >1000: Charged at 11.55
        if(rem > 0) {
            cost += rem * 11.55;
            breakdown.push({r: ">1000", u: rem, price: 11.55, sum: rem * 11.55});
        }
        fixed = 50; // Higher fixed charge for heavy users
    }

    return { cost, breakdown, fixed, isHigh };
}

function calc(){
    let u = Number(document.getElementById('units').value);
    let cycle = document.getElementById('cycle').value;
    let type = document.getElementById('type').value;
    let res = document.getElementById('result');

    if(!u || u <= 0){ alert("Please enter valid units."); return; }

    // Logic is always Bi-Monthly. If user selects Monthly, we multiply input by 2.
    let units = (cycle === 'monthly') ? u * 2 : u;
    
    let html = "";
    
    if(type === 'domestic'){
        let data = getBillBreakdown(units);
        let finalCost = data.cost + data.fixed;
        
        // If view is monthly, show half the cost
        if(cycle === 'monthly') finalCost /= 2;

        res.style.display = 'block';
        html += `<span class="bill-total">₹${finalCost.toFixed(2)}</span>`;
        
        if(data.isHigh && cycle === 'bimonthly'){
            html += `<span class="high-usage-badge"><i class="fa-solid fa-triangle-exclamation"></i> High Usage Tariff Applied (>500 Units)</span>`;
        }

        html += `<table><tr><th>Range</th><th>Rate</th><th>Units</th><th>Amt</th></tr>`;
        data.breakdown.forEach(row => {
            if(row.u > 0){
                html += `<tr><td>${row.r}</td><td>₹${row.price}</td><td>${row.u}</td><td>₹${row.sum.toFixed(2)}</td></tr>`;
            }
        });
        
        // Handle Fixed Charge Display
        let displayFixed = (cycle === 'monthly') ? data.fixed / 2 : data.fixed;
        html += `<tr><td colspan="3"><strong>Fixed Charges</strong></td><td><strong>₹${displayFixed.toFixed(2)}</strong></td></tr>`;
        html += `</table>`;
        
        if(cycle === 'monthly') html += `<p style="font-size:0.8rem; text-align:center; color:#666; margin-top:10px;">* Showing monthly estimate (Total / 2)</p>`;

    } else {
        // Commercial Logic (Simplified)
        let rate = 9.50; 
        let energy = units * rate;
        let fixed = 300; 
        let total = energy + fixed;
        
        if(cycle === 'monthly'){ total /= 2; energy /= 2; fixed /= 2; }
        
        res.style.display = 'block';
        html += `<span class="bill-total">₹${total.toFixed(2)}</span>`;
        html += `<p style="text-align:center">Commercial Flat Rate Estimate</p>`;
    }

    res.innerHTML = html;
    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#2563eb', '#06b6d4'] });
}
</script>
</body>
</html>
